!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("styled-components")):"function"==typeof define&&define.amd?define(["react","styled-components"],t):"object"==typeof exports?exports.ReactSimpleChatbot=t(require("react"),require("styled-components")):e.ReactSimpleChatbot=t(e.react,e["styled-components"])}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="dist/",t(t.s=9)}([function(e,t,n){e.exports=n(5)()},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){e.exports=function(e,t){var n=["abcdefghijklmnopqrstuvwxyz","ABCDEFGHIJKLMNOPQRSTUVWXYZ","0123456789","~!@#$%^&()_+-={}[];',"],r="";(t=t||"aA0").split("").forEach(function(e){isNaN(parseInt(e))?/[a-z]/.test(e)?r+=n[0]:/[A-Z]/.test(e)?r+=n[1]:r+=n[3]:r+=n[2]}),e=e||30;for(var o="";e--;)o+=r.charAt(Math.floor(Math.random()*r.length));return o}},function(e,t){function n(e,t,o){return t instanceof Array?function(e,t,r){for(var o=0,i=t.length;o<i;o++)t[o]=n(e,t[o],r);return t}(e,t,o):t instanceof l?t.length?o.hasOwnProperty(t)?o[t]:o[t]=function(e,t){for(var n=0,o=t.length;n<o;e=e[t[n++].replace(s,r)]);return e}(e,t.split(r)):e:t instanceof Object?function(e,t,r){for(var o in t)t.hasOwnProperty(o)&&(t[o]=n(e,t[o],r));return t}(e,t,o):t}var r="~",o="\\x"+("0"+r.charCodeAt(0).toString(16)).slice(-2),i="\\"+o,a=new RegExp(o,"g"),s=new RegExp(i,"g"),u=new RegExp("(?:^|([^\\\\]))"+i),c=[].indexOf||function(e){for(var t=this.length;t--&&this[t]!==e;);return t},l=String;this.stringify=function(e,t,n,s){return JSON.stringify(e,function(e,t,n){var s,u=[],l=[e],p=[e],f=[n?r:"[Circular]"],d=e,b=1;return function(e,h){return t&&(h=t.call(this,e,h)),""!==e&&(d!==this&&(s=b-c.call(l,this)-1,b-=s,l.splice(b,l.length),u.splice(b-1,u.length),d=this),"object"==typeof h&&h?(c.call(l,h)<0&&l.push(d=h),b=l.length,(s=c.call(p,h))<0?(s=p.push(h)-1,n?(u.push((""+e).replace(a,o)),f[s]=r+u.join(r)):f[s]=f[0]):h=f[s]):"string"==typeof h&&n&&(h=h.replace(o,i).replace(r,o))),h}}(e,t,!s),n)},this.parse=function(e,t){return JSON.parse(e,function(e){return function(t,a){var s="string"==typeof a;return s&&a.charAt(0)===r?new l(a.slice(1)):(""===t&&(a=n(a,a,{})),s&&(a=a.replace(u,"$1"+r).replace(i,o)),e?e.call(this,t,a):a)}}(t))}},function(e,t,n){"use strict";var r=n(6),o=n(7),i=n(8);e.exports=function(){function e(e,t,n,r,a,s){s!==i&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,o,i,a,s,u){if(r(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,i,a,s,u],p=0;(c=new Error(t.replace(/%s/g,function(){return l[p++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(){var e=s(["\n  0% { box-shadow: 0 0 0 0 ","; }\n  70% { box-shadow: 0 0 0 10px ","; }\n  100% { box-shadow: 0 0 0 0 ","; }\n"]);return r=function(){return e},e}function o(){var e=s(["\n  25% { transform: rotate(-1deg); }\n  100% { transform: rotate(1deg); }\n"]);return o=function(){return e},e}function i(){var e=s(["\n  100% { transform: scale(1); }\n"]);return i=function(){return e},e}function a(){var e=s(["\n  0% { opacity: .2; }\n  20% { opacity: 1; }\n  100% { opacity: .2; }\n"]);return a=function(){return e},e}function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function u(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 1.4s infinite both;\n  animation-delay: ",";\n"]);return u=function(){return e},e}function c(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\n  display: flex;\n  justify-content: center;\n  margin: 0 6px 10px 6px;\n  padding: 16px;\n"]);return c=function(){return e},e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 0.3s ease forwards;\n  cursor: pointer;\n  display: inline-block;\n  margin: 2px;\n  transform: scale(0);\n"]);return g=function(){return e},e}function y(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background: ",";\n  border-radius: 22px;\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\n  color: ",";\n  display: inline-block;\n  font-size: 14px;\n  padding: 12px;\n\n  &:hover {\n    opacity: 0.7;\n  }\n"]);return y=function(){return e},e}function v(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  margin: 2px 0 12px 0;\n  padding: 0 6px;\n"]);return v=function(){return e},e}function m(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""]);return m=function(){return e},e}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 0.3s ease forwards;\n  background: ",";\n  border-radius: ",";\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.15);\n  color: ",";\n  display: inline-block;\n  font-size: 14px;\n  max-width: 50%;\n  margin: ",";\n  overflow: hidden;\n  position: relative;\n  padding: 12px;\n  transform: scale(0);\n  transform-origin: ",";\n"]);return E=function(){return e},e}function P(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  animation: "," 0.3s ease forwards;\n  border-radius: ",";\n  box-shadow: rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;\n  height: 40px;\n  min-width: 40px;\n  padding: 3px;\n  transform: scale(0);\n  transform-origin: ",";\n  width: 40;\n"]);return P=function(){return e},e}function z(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  display: inline-block;\n  order: ",";\n  padding: 6px;\n"]);return z=function(){return e},e}function q(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  align-items: flex-end;\n  display: flex;\n  justify-content: ",";\n"]);return q=function(){return e},e}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  background: ",";\n  border-radius: 10px;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\n  font-family: ",";\n  overflow: hidden;\n  position: ",";\n  bottom: ",";\n  top: ",";\n  right: ",";\n  left: ",";\n  width: ",";\n  height: ",";\n  z-index: 999;\n  transform: ",";\n  transform-origin: ",";\n  transition: transform 0.3s ease;\n\n  @media screen and (max-width: 568px) {\n    border-radius: ",";\n    bottom: 0 !important;\n    left: initial !important;\n    height: 100%;\n    right: 0 !important;\n    top: initial !important;\n    width: 100%;\n  }\n"]);return F=function(){return e},e}function V(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  height: calc("," - ",");\n  overflow-y: scroll;\n  margin-top: 2px;\n  padding-top: 6px;\n\n  @media screen and (max-width: 568px) {\n    height: ",";\n  }\n"]);return V=function(){return e},e}function D(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  align-items: center;\n  background: ",";\n  color: ",";\n  display: flex;\n  fill: ",";\n  height: 56px;\n  justify-content: space-between;\n  padding: 0 10px;\n"]);return D=function(){return e},e}function L(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  margin: 0;\n  font-size: ",";\n"]);return L=function(){return e},e}function U(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  cursor: pointer;\n"]);return U=function(){return e},e}function H(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  align-items: center;\n  cursor: pointer;\n  background: ",";\n  bottom: 32px;\n  border-radius: 100%;\n  box-shadow: 0 12px 24px 0 rgba(0, 0, 0, 0.15);\n  display: flex;\n  fill: ",";\n  height: 56px;\n  justify-content: center;\n  position: fixed;\n  right: 32px;\n  transform: ",";\n  transition: transform 0.3s ease;\n  width: 56px;\n  z-index: 999;\n"]);return H=function(){return e},e}function K(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  height: 24px;\n  width: 24px;\n"]);return K=function(){return e},e}function $(){var e=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  position: relative;\n"]);return $=function(){return e},e}function J(){var e=Y(["\n          "," .2s ease\n        "]);return J=function(){return e},e}function W(){var e=Y(["\n  animation: ",";\n  border: 0;\n  border-radius: 0;\n  border-bottom-left-radius: 10px;\n  border-bottom-right-radius: 10px;\n  border-top: ",";\n  box-shadow: ",";\n  box-sizing: border-box;\n  color: ",";\n  font-size: 16px;\n  opacity: ",";\n  outline: none;\n  padding: ",";\n  width: 100%;\n  -webkit-appearance: none;\n\n  &:disabled {\n    background: #fff;\n  }\n\n  @media screen and (max-width: 568px) {\n    border-bottom-left-radius: ",";\n    border-bottom-right-radius: ",";\n  }\n"]);return W=function(){return e},e}function Y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Z(){var e=Q(["\n            "," 2s ease infinite\n          "]);return Z=function(){return e},e}function G(){var e=Q(["\n  background-color: transparent;\n  border: 0;\n  border-bottom-right-radius: 10px;\n  box-shadow: none;\n  cursor: ",";\n  fill: ",";\n  opacity: ",";\n  outline: none;\n  padding: 14px 16px 12px 16px;\n  position: absolute;\n  right: 0;\n  top: 0;\n  &:before {\n    content: '';\n    position: absolute;\n    width: 23px;\n    height: 23px;\n    border-radius: 50%;\n    animation: ",";\n  }\n  &:not(:disabled):hover {\n    opacity: 0.7;\n  }\n"]);return G=function(){return e},e}function Q(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),e}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var ce=n(1),le=n.n(ce),pe=n(0),fe=n.n(pe),de=n(3),be=n.n(de),he=n(2),ge=n.n(he),ye=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(e);return"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(t,")")},ve=Object(he.keyframes)(a()),me=Object(he.keyframes)(i()),Se=Object(he.keyframes)(o()),xe=ge.a.span(u(),ve,function(e){return e.delay}),Oe=function(){return le.a.createElement("span",{className:"rsc-loading"},le.a.createElement(xe,{delay:"0s"},"."),le.a.createElement(xe,{delay:".2s"},"."),le.a.createElement(xe,{delay:".4s"},"."))},we=ge.a.div(c()),je=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return h(b(b(n=function(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?b(e):t}(this,(e=f(t)).call.apply(e,[this].concat(o))))),"state",{loading:!0}),h(b(b(n)),"renderComponent",function(){var e=n.props,t=e.step,r=e.steps,o=e.previousStep,i=e.triggerNextStep,a=t.component;return le.a.cloneElement(a,{step:t,steps:r,previousStep:o,triggerNextStep:i})}),n}return d(t,ce.Component),function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.speak,r=t.step,o=t.previousValue,i=t.triggerNextStep,a=r.delay,s=r.waitAction;setTimeout(function(){e.setState({loading:!1},function(){s||r.rendered||i(),n(r,o)})},a)}},{key:"render",value:function(){var e=this.state.loading,t=this.props.style;return le.a.createElement(we,{className:"rsc-cs",style:t},e?le.a.createElement(Oe,null):this.renderComponent())}}]),t}();je.propTypes={previousStep:fe.a.objectOf(fe.a.any).isRequired,previousValue:fe.a.oneOfType([fe.a.string,fe.a.bool,fe.a.number,fe.a.object,fe.a.array]),speak:fe.a.func,step:fe.a.objectOf(fe.a.any).isRequired,steps:fe.a.objectOf(fe.a.any).isRequired,style:fe.a.objectOf(fe.a.any).isRequired,triggerNextStep:fe.a.func.isRequired},je.defaultProps={previousValue:"",speak:function(){}};var ke=je,Ee=ge.a.li(g(),me),Pe={background:"#f5f8fb",fontFamily:"monospace",headerBgColor:"#6e48aa",headerFontColor:"#fff",headerFontSize:"16px",botBubbleColor:"#6E48AA",botFontColor:"#fff",userBubbleColor:"#fff",userFontColor:"#4a4a4a"},ze=ge.a.a(y(),function(e){return e.theme.botBubbleColor},function(e){return e.theme.botFontColor});ze.defaultProps={theme:Pe};var qe=ze,Ce=ge.a.ul(v()),Ae=ge.a.div(m()),Re=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return k(j(j(n=function(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?j(e):t}(this,(e=O(t)).call.apply(e,[this].concat(o))))),"onOptionClick",function(e){var t=e.value;(0,n.props.triggerNextStep)({value:t})}),k(j(j(n)),"renderOption",function(e){var t=n.props,r=t.bubbleOptionStyle,o=t.step.user,i=e.value,a=e.label;return le.a.createElement(Ee,{key:i,className:"rsc-os-option"},le.a.createElement(qe,{className:"rsc-os-option-element",style:r,user:o,onClick:function(){return n.onOptionClick({value:i})}},a))}),n}return w(t,ce.Component),function(e,t,n){t&&x(e.prototype,t),n&&x(e,n)}(t,[{key:"render",value:function(){var e=this.props.step.options;return le.a.createElement(Ae,{className:"rsc-os"},le.a.createElement(Ce,{className:"rsc-os-options"},Object.keys(e).map(function(t){return e[t]}).map(this.renderOption)))}}]),t}();Re.propTypes={bubbleOptionStyle:fe.a.objectOf(fe.a.any).isRequired,step:fe.a.objectOf(fe.a.any).isRequired,triggerNextStep:fe.a.func.isRequired};var Ne=Re,Ie=ge.a.div(E(),me,function(e){return e.user?e.theme.userBubbleColor:e.theme.botBubbleColor},function(e){var t=e.isFirst,n=e.isLast,r=e.user;return t||n?!t&&n?r?"18px 0 18px 18px":"0 18px 18px 18px":e.user?"18px 18px 0 18px":"18px 18px 18px 0":r?"18px 0 0 18px":"0 18px 18px 0px"},function(e){return e.user?e.theme.userFontColor:e.theme.botFontColor},function(e){var t=e.isFirst,n=e.showAvatar,r=e.user;return!t&&n?r?"-8px 46px 10px 0":"-8px 0 10px 46px":t||n?"0 0 10px 0":r?"-8px 0px 10px 0":"-8px 0 10px 0px"},function(e){var t=e.isFirst,n=e.user;return t?n?"bottom right":"bottom left":n?"top right":"top left"});Ie.defaultProps={theme:Pe};var Me=Ie,Te=ge.a.img(P(),me,function(e){return e.user?"50% 50% 50% 0":"50% 50% 0 50%"},function(e){return e.user?"bottom left":"bottom right"}),_e=ge.a.div(z(),function(e){return e.user?"1":"0"}),Be=ge.a.div(q(),function(e){return e.user?"flex-end":"flex-start"}),Fe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return M(I(I(n=function(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?I(e):t}(this,(e=R(t)).call.apply(e,[this].concat(o))))),"state",{loading:!0}),M(I(I(n)),"getMessage",function(){var e=n.props,t=e.previousValue,r=e.step.message;return r?r.replace(/{previousValue}/g,t):""}),M(I(I(n)),"renderMessage",function(){var e=n.props,t=e.step,r=e.steps,o=e.previousStep,i=e.triggerNextStep,a=t.component;return a?le.a.cloneElement(a,{step:t,steps:r,previousStep:o,triggerNextStep:i}):n.getMessage()}),n}return N(t,ce.Component),function(e,t,n){t&&A(e.prototype,t),n&&A(e,n)}(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.step,r=t.speak,o=t.previousValue,i=t.triggerNextStep,a=n.component,s=n.delay,u=n.waitAction,c=a&&u;setTimeout(function(){e.setState({loading:!1},function(){c||n.rendered||i(),r(n,o)})},s)}},{key:"render",value:function(){var e=this.props,t=e.step,n=e.isFirst,r=e.isLast,o=e.avatarStyle,i=e.bubbleStyle,a=e.hideBotAvatar,s=e.hideUserAvatar,u=this.state.loading,c=t.avatar,l=t.user,p=l?!s:!a;return le.a.createElement(Be,{className:"rsc-ts ".concat(l?"rsc-ts-user":"rsc-ts-bot"),user:l},le.a.createElement(_e,{className:"rsc-ts-image-container",user:l},n&&p&&le.a.createElement(Te,{className:"rsc-ts-image",style:o,showAvatar:p,user:l,src:c,alt:"avatar"})),le.a.createElement(Me,{className:"rsc-ts-bubble",style:i,user:l,showAvatar:p,isFirst:n,isLast:r},u?le.a.createElement(Oe,null):this.renderMessage()))}}]),t}();Fe.propTypes={avatarStyle:fe.a.objectOf(fe.a.any).isRequired,isFirst:fe.a.bool.isRequired,isLast:fe.a.bool.isRequired,bubbleStyle:fe.a.objectOf(fe.a.any).isRequired,hideBotAvatar:fe.a.bool.isRequired,hideUserAvatar:fe.a.bool.isRequired,previousStep:fe.a.objectOf(fe.a.any),previousValue:fe.a.oneOfType([fe.a.string,fe.a.bool,fe.a.number,fe.a.object,fe.a.array]),speak:fe.a.func,step:fe.a.objectOf(fe.a.any).isRequired,steps:fe.a.objectOf(fe.a.any),triggerNextStep:fe.a.func.isRequired},Fe.defaultProps={previousStep:{},previousValue:"",speak:function(){},steps:{}};var Ve=Fe,De=[{key:"id",types:["string","number"],required:!0},{key:"user",types:["boolean"],required:!0},{key:"trigger",types:["string","number","function"],required:!1},{key:"validator",types:["function"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Le=[{key:"id",types:["string","number"],required:!0},{key:"message",types:["string","function"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ue=[{key:"id",types:["string","number"],required:!0},{key:"options",types:["object"],required:!0},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],He=[{key:"id",types:["string","number"],required:!0},{key:"component",types:["any"],required:!0},{key:"avatar",types:["string"],required:!1},{key:"replace",types:["boolean"],required:!1},{key:"waitAction",types:["boolean"],required:!1},{key:"asMessage",types:["boolean"],required:!1},{key:"trigger",types:["string","number","function"],required:!1},{key:"delay",types:["number"],required:!1},{key:"end",types:["boolean"],required:!1},{key:"placeholder",types:["string"],required:!1},{key:"hideInput",types:["boolean"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],Ke=[{key:"id",types:["string","number"],required:!0},{key:"update",types:["string","number"],required:!0},{key:"trigger",types:["string","number","function"],required:!0},{key:"placeholder",types:["string"],required:!1},{key:"inputAttributes",types:["object"],required:!1},{key:"metadata",types:["object"],required:!1}],$e=n(4),Je={parse:function(e){var t=[];if(e.user)t=De;else if(e.message)t=Le;else if(e.options)t=Ue;else if(e.component)t=He;else{if(!e.update)throw new Error("The step ".concat($e.stringify(e)," is invalid"));t=Ke}for(var n=0,r=t.length;n<r;n+=1){var o=t[n],i=o.key,a=o.types,s=o.required;if(!e[i]&&s)throw new Error("Key '".concat(i,"' is required in step ").concat($e.stringify(e)));if(e[i]&&"any"!==a[0]&&a.indexOf(T(e[i]))<0)throw new Error("The type of '".concat(i,"' value must be ").concat(a.join(" or ")," instead of ").concat(T(e[i])))}var u=t.map(function(e){return e.key});for(var i in e)u.indexOf(i)<0&&(console.error("Invalid key '".concat(i,"' in step '").concat(e.id,"'")),delete e[i]);return e},checkInvalidIds:function(e){for(var t in e){var n=e[t],r=e[t].trigger;if("function"!=typeof r)if(n.options)for(var o=n.options.filter(function(e){return"function"!=typeof e.trigger}).map(function(e){return e.trigger}),i=0,a=o.length;i<a;i+=1){var s=o[i];if(s&&!e[s])throw new Error("The id '".concat(s,"' triggered by option ").concat(i+1," in step '").concat(e[t].id,"' does not exist"))}else if(r&&!e[r])throw new Error("The id '".concat(r,"' triggered by step '").concat(e[t].id,"' does not exist"))}}},We=n(4),Ye=function(e,t){var n=e.cacheName,r=e.cache,o=e.firstStep,i=e.steps,a=e.historySteps,s=e.botAvatar,u=e.userAvatar,c=o,l=_(a.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){B(e,t,n[t])})}return e}({},e,{key:be()(24),avatar:e.user?u:s,rendered:!0,delay:0})})).concat([i[c.id]]),p=[i[c.id]];if(r&&localStorage.getItem(n)){var f=We.parse(localStorage.getItem(n)),d=f.renderedSteps[f.renderedSteps.length-1];if(!d||!d.end){for(var b=0,h=f.renderedSteps.length;b<h;b+=1){var g=f.renderedSteps[b];if(f.renderedSteps[b].delay=0,f.renderedSteps[b].rendered=!0,g.component){var y=g.id;f.renderedSteps[b].component=i[y].component}}var v=f.currentStep,m=v.trigger,S=v.end,x=v.options,O=f.currentStep.id;if(x&&delete f.currentStep.rendered,!m&&!S)if(x)for(var w=0;w<x.length;w+=1)f.currentStep.options[w].trigger=i[O].options[w].trigger;else f.currentStep.trigger=i[O].trigger;return f.currentStep.user&&t(),f}localStorage.removeItem(n)}return{currentStep:c,previousStep:{},previousSteps:p,renderedSteps:l}},Ze=function(e,t){var n=We.parse(We.stringify(t));for(var r in n)for(var o=0,i=n[r].length;o<i;o+=1)n[r][o].component&&(n[r][o].component=n[r][o].id);localStorage.setItem(e,We.stringify(n))},Ge=ge.a.div(F(),function(e){return e.theme.background},function(e){return e.theme.fontFamily},function(e){return e.floating?"fixed":"relative"},function(e){var t=e.floating,n=e.floatingStyle;return t?n.bottom||"32px":"initial"},function(e){var t=e.floating,n=e.floatingStyle;return t&&n.top||"initial"},function(e){var t=e.floating,n=e.floatingStyle;return t?n.right||"32px":"initial"},function(e){var t=e.floating,n=e.floatingStyle;return t&&n.left||"initial"},function(e){return e.width},function(e){return e.height},function(e){return e.opened?"scale(1)":"scale(0)"},function(e){return e.floatingStyle.transformOrigin||"bottom right"},function(e){return e.floating?"0":""});Ge.defaultProps={theme:Pe};var Qe=Ge,Xe=ge.a.div(V(),function(e){return e.height},function(e){return e.hideInput?"56px":"112px"},function(e){return e.floating?"calc(100% - 112px)":""}),et=ge.a.div(D(),function(e){return e.theme.headerBgColor},function(e){return e.theme.headerFontColor},function(e){return e.theme.headerFontColor});et.defaultProps={theme:Pe};var tt=et,nt=ge.a.h2(L(),function(e){return e.theme.headerFontSize});nt.defaultProps={theme:Pe};var rt=nt,ot=ge.a.a(U()),it=ge.a.a(H(),function(e){return e.theme.headerBgColor},function(e){return e.theme.headerFontColor},function(e){return e.opened?"scale(0)":"scale(1)"});it.defaultProps={theme:{headerBgColor:"#6e48aa",headerFontColor:"#fff"}};var at=it,st=ge.a.img(K()),ut=ge.a.div($()),ct=ge.a.input(W(),function(e){return e.invalid?Object(he.css)(J(),Se):""},function(e){return e.invalid?"0":"1px solid #eee"},function(e){return e.invalid?"inset 0 0 2px #E53935":"none"},function(e){return e.invalid?"#E53935":""},function(e){return e.disabled&&!e.invalid?".5":"1"},function(e){return e.hasButton?"16px 52px 16px 10px":"16px 10px"},function(e){return e.floating?"0":"10px"},function(e){return e.floating?"0":"10px"}),lt=ge.a.button(G(),function(e){return e.disabled?"default":"pointer"},function(e){var t=e.speaking,n=e.invalid,r=e.theme;return t?r.headerBgColor:n?"#E53935":"#4a4a4a"},function(e){return e.disabled&&!e.invalid?".5":"1"},function(e){var t=e.theme;return e.speaking?Object(he.css)(Z(),function(e){return Object(he.keyframes)(r(),ye(e,.4),ye(e,0),ye(e,0))}(t.headerBgColor)):""});lt.defaultProps={theme:Pe};var pt=lt,ft=null,dt=function(){},bt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dt,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ft||(ft=this),this.state={inputValue:"",lang:o,onChange:t,onEnd:n,onStop:r},this.onResult=this.onResult.bind(this),this.onEnd=this.onEnd.bind(this),this.setup(),ft}return te(e,null,[{key:"isSupported",value:function(){return"webkitSpeechRecognition"in window}}]),te(e,[{key:"onChange",value:function(e){var t=this.state.onChange;this.setState({inputValue:e}),t(e)}},{key:"onFinal",value:function(e){this.setState({inputValue:e}),this.recognition.stop()}},{key:"onEnd",value:function(){var e=this.state,t=e.onStop,n=e.onEnd,r=e.force;this.setState({speaking:!1}),r?t():n()}},{key:"onResult",value:function(e){for(var t="",n="",r=e.resultIndex;r<e.results.length;r+=1)e.results[r].isFinal?(n+=e.results[r][0].transcript,this.onFinal(n)):(t+=e.results[r][0].transcript,this.onChange(t))}},{key:"setState",value:function(e){this.state=X({},this.state,e)}},{key:"setup",value:function(){if(!e.isSupported())return this;var t=window.webkitSpeechRecognition;return this.recognition=new t,this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.lang=this.state.lang,this.recognition.onresult=this.onResult,this.recognition.onend=this.onEnd,this}},{key:"setLang",value:function(e){return this.setState({lang:e}),this.setup(),this}},{key:"speak",value:function(){return e.isSupported()?(this.state.speaking?(this.setState({force:!0}),this.recognition.stop()):(this.recognition.start(),this.setState({speaking:!0,inputValue:""})),this):this}}]),e}(),ht=function(){return le.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},le.a.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),le.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},gt=function(){return le.a.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},le.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),le.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},yt=function(e){var t=e.size;return le.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 500 500"},le.a.createElement("g",null,le.a.createElement("g",null,le.a.createElement("polygon",{points:"0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"}))))};yt.propTypes={size:fe.a.number},yt.defaultProps={size:20};var vt=yt,mt=function(e){var t=e.size;return le.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 400 400"},le.a.createElement("g",null,le.a.createElement("path",{d:"M290.991,240.991c0,26.392-21.602,47.999-48.002,47.999h-11.529c-26.4,0-48.002-21.607-48.002-47.999V104.002   c0-26.4,21.602-48.004,48.002-48.004h11.529c26.4,0,48.002,21.604,48.002,48.004V240.991z"}),le.a.createElement("path",{d:"M342.381,209.85h-8.961c-4.932,0-8.961,4.034-8.961,8.961v8.008c0,50.26-37.109,91.001-87.361,91.001   c-50.26,0-87.109-40.741-87.109-91.001v-8.008c0-4.927-4.029-8.961-8.961-8.961h-8.961c-4.924,0-8.961,4.034-8.961,8.961v8.008   c0,58.862,40.229,107.625,96.07,116.362v36.966h-34.412c-4.932,0-8.961,4.039-8.961,8.971v17.922c0,4.923,4.029,8.961,8.961,8.961   h104.688c4.926,0,8.961-4.038,8.961-8.961v-17.922c0-4.932-4.035-8.971-8.961-8.971h-34.43v-36.966   c55.889-8.729,96.32-57.5,96.32-116.362v-8.008C351.342,213.884,347.303,209.85,342.381,209.85z"})))};mt.propTypes={size:fe.a.number},mt.defaultProps={size:20};var St=mt,xt=function(){return/iphone|ipod|android|ie|blackberry|fennec/i.test(navigator.userAgent)},Ot=function(e){return"string"==typeof e},wt=function(e){return function(t,n){var r=e.lang,o=e.voice,i=e.enable,a=t.user;if(window.SpeechSynthesisUtterance&&window.speechSynthesis&&!a&&i){var s=function(e){var t=e.message,n=e.metadata,r=void 0===n?{}:n;return Ot(r.speak)?r.speak:Ot(t)?t:""}(t),u=new window.SpeechSynthesisUtterance;u.text=s.replace(/{previousValue}/g,n),u.lang=r,u.voice=o,window.speechSynthesis.speak(u)}}},jt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ue(se(se(n=function(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?se(e):t}(this,ie(t).call(this,e)))),"onNodeInserted",function(e){var t=e.currentTarget;n.props.enableSmoothScroll&&n.supportsScrollBehavior?t.scroll({top:t.scrollHeight,left:0,behavior:"smooth"}):t.scrollTop=t.scrollHeight}),ue(se(se(n)),"onResize",function(){n.content.scrollTop=n.content.scrollHeight}),ue(se(se(n)),"onRecognitionChange",function(e){n.setState({inputValue:e})}),ue(se(se(n)),"onRecognitionEnd",function(){n.setState({speaking:!1}),n.handleSubmitButton()}),ue(se(se(n)),"onRecognitionStop",function(){n.setState({speaking:!1})}),ue(se(se(n)),"onValueChange",function(e){n.setState({inputValue:e.target.value})}),ue(se(se(n)),"getTriggeredStep",function(e,t){var r=n.generateRenderedStepsById();return"function"==typeof e?e({value:t,steps:r}):e}),ue(se(se(n)),"getStepMessage",function(e){var t=n.state.previousSteps,r=t.length>0?t.length-1:0,o=n.generateRenderedStepsById(),i=t[r].value;return"function"==typeof e?e({previousValue:i,steps:o}):e}),ue(se(se(n)),"generateRenderedStepsById",function(){for(var e=n.state.previousSteps,t={},r=0,o=e.length;r<o;r+=1){var i=e[r],a=i.id,s=i.message,u=i.value,c=i.metadata;t[a]={id:a,message:s,value:u,metadata:c}}return t}),ue(se(se(n)),"triggerNextStep",function(e){var t=n.props.enableMobileAutoFocus,r=n.state,o=r.defaultUserSettings,i=r.previousSteps,a=r.renderedSteps,s=r.steps,u=n.state,c=u.currentStep,l=u.previousStep,p=c.end;if(e&&e.value&&(c.value=e.value),e&&e.hideInput&&(c.hideInput=e.hideInput),e&&e.trigger&&(c.trigger=n.getTriggeredStep(e.trigger,e.value)),p)n.handleEnd();else if(c.options&&e){var f=c.options.filter(function(t){return t.value===e.value})[0],d=n.getTriggeredStep(f.trigger,c.value);delete c.options,c=re({},c,f,o,{user:!0,message:f.label,trigger:d}),a.pop(),i.pop(),a.push(c),i.push(c),n.setState({currentStep:c,renderedSteps:a,previousSteps:i})}else if(c.trigger){c.replace&&a.pop();var b=re({},s[n.getTriggeredStep(c.trigger,c.value)]);if(b.message)b.message=n.getStepMessage(b.message);else if(b.update){var h=b;if((b=re({},s[h.update])).options)for(var g=0,y=b.options.length;g<y;g+=1)b.options[g].trigger=h.trigger;else b.trigger=h.trigger}b.key=be()(24),l=c,c=b,n.setState({renderedSteps:a,currentStep:c,previousStep:l},function(){b.user?n.setState({disabled:!1},function(){!t&&xt()||n.input&&n.input.focus()}):(a.push(b),i.push(b),n.setState({renderedSteps:a,previousSteps:i}))})}var v=n.props,m=v.cache,S=v.cacheName;m&&setTimeout(function(){Ze(S,{currentStep:c,previousStep:l,previousSteps:i,renderedSteps:a})},300)}),ue(se(se(n)),"handleEnd",function(){var e=n.props.handleEnd;if(e){for(var t=n.state.previousSteps,r=t.map(function(e){return{id:e.id,message:e.message,value:e.value,metadata:e.metadata}}),o=[],i=0,a=t.length;i<a;i+=1){var s=t[i],u=s.id,c=s.message,l=s.value,p=s.metadata;o[u]={id:u,message:c,value:l,metadata:p}}e({renderedSteps:r,steps:o,values:t.filter(function(e){return e.value}).map(function(e){return e.value})})}}),ue(se(se(n)),"isInputValueEmpty",function(){var e=n.state.inputValue;return!e||0===e.length}),ue(se(se(n)),"isLastPosition",function(e){var t=n.state.renderedSteps,r=t.length,o=t.map(function(e){return e.key}).indexOf(e.key);if(r<=1||o+1===r)return!0;var i=t[o+1];return!i.message&&!i.asMessage||e.user!==i.user}),ue(se(se(n)),"isFirstPosition",function(e){var t=n.state.renderedSteps,r=t.map(function(e){return e.key}).indexOf(e.key);if(0===r)return!0;var o=t[r-1];return!o.message&&!o.asMessage||e.user!==o.user}),ue(se(se(n)),"handleKeyPress",function(e){"Enter"===e.key&&n.submitUserMessage()}),ue(se(se(n)),"handleSubmitButton",function(){var e=n.state,t=e.speaking,r=e.recognitionEnable;if((n.isInputValueEmpty()||t)&&r)return n.recognition.speak(),void(t||n.setState({speaking:!0}));n.submitUserMessage()}),ue(se(se(n)),"submitUserMessage",function(){var e=n.state,t=e.defaultUserSettings,r=e.inputValue,o=e.previousSteps,i=e.renderedSteps,a=n.state.currentStep;a.validator&&n.checkInvalidInput()||(a=re({},t,a,{message:r,value:r}),i.push(a),o.push(a),n.setState({currentStep:a,renderedSteps:i,previousSteps:o,disabled:!0,inputValue:""},function(){n.input&&n.input.blur()}))}),ue(se(se(n)),"checkInvalidInput",function(){var e=n.props.enableMobileAutoFocus,t=n.state,r=t.currentStep,o=t.inputValue,i=r.validator(o),a=o;return!("boolean"==typeof i&&i||(n.setState({inputValue:i.toString(),inputInvalid:!0,disabled:!0},function(){setTimeout(function(){n.setState({inputValue:a,inputInvalid:!1,disabled:!1},function(){!e&&xt()||n.input&&n.input.focus()})},2e3)}),0))}),ue(se(se(n)),"toggleChatBot",function(e){var t=n.props.toggleFloating;t?t({opened:e}):n.setState({opened:e})}),ue(se(se(n)),"renderStep",function(e,t){var r=n.state.renderedSteps,o=n.props,i=o.avatarStyle,a=o.bubbleStyle,s=o.bubbleOptionStyle,u=o.customStyle,c=o.hideBotAvatar,l=o.hideUserAvatar,p=o.speechSynthesis,f=e.options,d=e.component,b=e.asMessage,h=n.generateRenderedStepsById(),g=t>0?r[t-1]:{};return d&&!b?le.a.createElement(ke,{key:t,speak:n.speak,step:e,steps:h,style:u,previousStep:g,previousValue:g.value,triggerNextStep:n.triggerNextStep}):f?le.a.createElement(Ne,{key:t,step:e,speak:n.speak,previousValue:g.value,triggerNextStep:n.triggerNextStep,bubbleOptionStyle:s}):le.a.createElement(Ve,{key:t,step:e,steps:h,speak:n.speak,previousStep:g,previousValue:g.value,triggerNextStep:n.triggerNextStep,avatarStyle:i,bubbleStyle:a,hideBotAvatar:c,hideUserAvatar:l,speechSynthesis:p,isFirst:n.isFirstPosition(e),isLast:n.isLastPosition(e)})}),n.content=null,n.input=null,n.supportsScrollBehavior=!1,n.setContentRef=function(e){n.content=e},n.setInputRef=function(e){n.input=e},n.state={renderedSteps:[],previousSteps:[],currentStep:{},previousStep:{},steps:{},disabled:!0,opened:e.opened||!e.floating,inputValue:"",inputInvalid:!1,speaking:!1,recognitionEnable:e.recognitionEnable&&bt.isSupported(),defaultUserSettings:{}},n.speak=wt(e.speechSynthesis),n}return ae(t,ce.Component),function(e,t,n){t&&oe(e.prototype,t),n&&oe(e,n)}(t,[{key:"componentDidMount",value:function(){for(var e=this,t=this.props.steps,n=this.props,r=n.botDelay,o=n.botAvatar,i=n.cache,a=n.cacheName,s=n.historySteps,u=n.customDelay,c=n.enableMobileAutoFocus,l=n.userAvatar,p={},f={delay:r,avatar:o},d={delay:n.userDelay,avatar:l,hideInput:!1},b={delay:u},h=0,g=t.length;h<g;h+=1){var y=t[h],v={};y.user?v=d:y.message||y.asMessage?v=f:y.component&&(v=b),p[y.id]=re({},v,Je.parse(y))}Je.checkInvalidIds(p);var m=t[0];if(m.message){var S=m.message;m.message="function"==typeof S?S():S,p[m.id].message=m.message}var x=this.state.recognitionEnable,O=this.props.recognitionLang;x&&(this.recognition=new bt(this.onRecognitionChange,this.onRecognitionEnd,this.onRecognitionStop,O)),this.supportsScrollBehavior="scrollBehavior"in document.documentElement.style,this.content&&(this.content.addEventListener("DOMNodeInserted",this.onNodeInserted),window.addEventListener("resize",this.onResize));var w=Ye({cacheName:a,cache:i,firstStep:m,steps:p,historySteps:s,botAvatar:o,userAvatar:l},function(){e.setState({disabled:!1},function(){!c&&xt()||e.input&&e.input.focus()})}),j=w.currentStep,k=w.previousStep,E=w.previousSteps,P=w.renderedSteps;this.setState({currentStep:j,defaultUserSettings:d,previousStep:k,previousSteps:E,renderedSteps:P,steps:p})}},{key:"componentWillUnmount",value:function(){this.content&&(this.content.removeEventListener("DOMNodeInserted",this.onNodeInserted),window.removeEventListener("resize",this.onResize))}},{key:"render",value:function(){var e=this,t=this.state,n=t.currentStep,r=t.disabled,o=t.inputInvalid,i=t.inputValue,a=t.opened,s=t.renderedSteps,u=t.speaking,c=t.recognitionEnable,l=this.props,p=l.className,f=l.contentStyle,d=l.floating,b=l.floatingIcon,h=l.floatingStyle,g=l.footerStyle,y=l.headerComponent,v=l.headerTitle,m=l.hideHeader,S=l.hideSubmitButton,x=l.inputStyle,O=l.placeholder,w=l.inputAttributes,j=l.recognitionPlaceholder,k=l.style,E=l.submitButtonStyle,P=l.width,z=l.height,q=y||le.a.createElement(tt,{className:"rsc-header"},le.a.createElement(rt,{className:"rsc-header-title"},v),d&&le.a.createElement(ot,{className:"rsc-header-close-button",onClick:function(){return e.toggleChatBot(!1)}},le.a.createElement(gt,null))),C=(this.isInputValueEmpty()||u)&&c?le.a.createElement(St,null):le.a.createElement(vt,null),A=u?j:n.placeholder||O,R=n.inputAttributes||w;return le.a.createElement("div",{className:"rsc ".concat(p)},d&&le.a.createElement(at,{className:"rsc-float-button",style:h,opened:a,onClick:function(){return e.toggleChatBot(!0)}},"string"==typeof b?le.a.createElement(st,{src:b}):b),le.a.createElement(Qe,{className:"rsc-container",floating:d,floatingStyle:h,opened:a,style:k,width:P,height:z},!m&&q,le.a.createElement(Xe,{className:"rsc-content",ref:this.setContentRef,floating:d,style:f,height:z,hideInput:n.hideInput},s.map(this.renderStep)),le.a.createElement(ut,{className:"rsc-footer",style:g},!n.hideInput&&le.a.createElement(ct,re({type:"textarea",style:x,ref:this.setInputRef,className:"rsc-input",placeholder:o?"":A,onKeyPress:this.handleKeyPress,onChange:this.onValueChange,value:i,floating:d,invalid:o,disabled:r,hasButton:!S},R)),!n.hideInput&&!S&&le.a.createElement(pt,{className:"rsc-submit-button",style:E,onClick:this.handleSubmitButton,invalid:o,disabled:r,speaking:u},C))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.opened;return void 0!==e.toggleFloating&&void 0!==n&&n!==t.opened?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ue(e,t,n[t])})}return e}({},t,{opened:n}):t}}]),t}();jt.propTypes={avatarStyle:fe.a.objectOf(fe.a.any),botAvatar:fe.a.string,botDelay:fe.a.number,bubbleOptionStyle:fe.a.objectOf(fe.a.any),bubbleStyle:fe.a.objectOf(fe.a.any),cache:fe.a.bool,cacheName:fe.a.string,className:fe.a.string,contentStyle:fe.a.objectOf(fe.a.any),customDelay:fe.a.number,customStyle:fe.a.objectOf(fe.a.any),enableMobileAutoFocus:fe.a.bool,enableSmoothScroll:fe.a.bool,floating:fe.a.bool,floatingIcon:fe.a.oneOfType([fe.a.string,fe.a.element]),floatingStyle:fe.a.objectOf(fe.a.any),footerStyle:fe.a.objectOf(fe.a.any),handleEnd:fe.a.func,headerComponent:fe.a.element,headerTitle:fe.a.string,height:fe.a.string,hideBotAvatar:fe.a.bool,hideHeader:fe.a.bool,hideSubmitButton:fe.a.bool,hideUserAvatar:fe.a.bool,historySteps:fe.a.arrayOf(fe.a.object),inputAttributes:fe.a.objectOf(fe.a.any),inputStyle:fe.a.objectOf(fe.a.any),opened:fe.a.bool,toggleFloating:fe.a.func,placeholder:fe.a.string,recognitionEnable:fe.a.bool,recognitionLang:fe.a.string,recognitionPlaceholder:fe.a.string,speechSynthesis:fe.a.shape({enable:fe.a.bool,lang:fe.a.string,voice:"undefined"!=typeof window?fe.a.instanceOf(window.SpeechSynthesisVoice):fe.a.any}),steps:fe.a.arrayOf(fe.a.object).isRequired,style:fe.a.objectOf(fe.a.any),submitButtonStyle:fe.a.objectOf(fe.a.any),userAvatar:fe.a.string,userDelay:fe.a.number,width:fe.a.string},jt.defaultProps={avatarStyle:{},botDelay:1e3,bubbleOptionStyle:{},bubbleStyle:{},cache:!1,cacheName:"rsc_cache",className:"",contentStyle:{},customStyle:{},customDelay:1e3,enableMobileAutoFocus:!1,enableSmoothScroll:!1,floating:!1,floatingIcon:le.a.createElement(ht,null),floatingStyle:{},footerStyle:{},handleEnd:void 0,headerComponent:void 0,headerTitle:"Chat",height:"520px",hideBotAvatar:!1,hideHeader:!1,hideSubmitButton:!1,hideUserAvatar:!1,historySteps:[],inputStyle:{},opened:void 0,placeholder:"Type the message ...",inputAttributes:{},recognitionEnable:!1,recognitionLang:"en",recognitionPlaceholder:"Listening ...",speechSynthesis:{enable:!1,lang:"en",voice:null},style:{},submitButtonStyle:{},toggleFloating:void 0,userDelay:1e3,width:"350px",botAvatar:"data:image/svg+xml,%3csvg version='1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3e%3cpath d='M303 70a47 47 0 1 0-70 40v84h46v-84c14-8 24-23 24-40z' fill='%2393c7ef'/%3e%3cpath d='M256 23v171h23v-84a47 47 0 0 0-23-87z' fill='%235a8bb0'/%3e%3cpath fill='%2393c7ef' d='M0 240h248v124H0z'/%3e%3cpath fill='%235a8bb0' d='M264 240h248v124H264z'/%3e%3cpath fill='%2393c7ef' d='M186 365h140v124H186z'/%3e%3cpath fill='%235a8bb0' d='M256 365h70v124h-70z'/%3e%3cpath fill='%23cce9f9' d='M47 163h419v279H47z'/%3e%3cpath fill='%2393c7ef' d='M256 163h209v279H256z'/%3e%3cpath d='M194 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%233c5d76'/%3e%3cpath d='M380 272a31 31 0 0 1-62 0c0-18 14-32 31-32s31 14 31 32z' fill='%231e2e3b'/%3e%3cpath d='M186 349a70 70 0 1 0 140 0H186z' fill='%233c5d76'/%3e%3cpath d='M256 349v70c39 0 70-31 70-70h-70z' fill='%231e2e3b'/%3e%3c/svg%3e",userAvatar:"data:image/svg+xml,%3csvg viewBox='-208.5 21 100 100' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3ccircle cx='-158.5' cy='71' fill='%23F5EEE5' r='50'/%3e%3cdefs%3e%3ccircle cx='-158.5' cy='71' id='a' r='50'/%3e%3c/defs%3e%3cclipPath id='b'%3e%3cuse overflow='visible' xlink:href='%23a'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23b)' d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' fill='%23E6C19C'/%3e%3cg clip-path='url(%23b)'%3e%3cdefs%3e%3cpath d='M-108.5 121v-14s-21.2-4.9-28-6.7c-2.5-.7-7-3.3-7-12V82h-30v6.3c0 8.7-4.5 11.3-7 12-6.8 1.9-28.1 7.3-28.1 6.7v14h100.1z' id='c'/%3e%3c/defs%3e%3cclipPath id='d'%3e%3cuse overflow='visible' xlink:href='%23c'/%3e%3c/clipPath%3e%3cpath clip-path='url(%23d)' d='M-158.5 100.1c12.7 0 23-18.6 23-34.4 0-16.2-10.3-24.7-23-24.7s-23 8.5-23 24.7c0 15.8 10.3 34.4 23 34.4z' fill='%23D4B08C'/%3e%3c/g%3e%3cpath d='M-158.5 96c12.7 0 23-16.3 23-31 0-15.1-10.3-23-23-23s-23 7.9-23 23c0 14.7 10.3 31 23 31z' fill='%23F2CEA5'/%3e%3c/svg%3e"};var kt=jt;n.d(t,"Loading",function(){return Oe}),t.default=kt}])});